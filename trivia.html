<!DOCTYPE html>
<html>
<head>
  <title>Trivia Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f2f2f2;
    }
    h1 {
      margin-top: 40px;
      color: #333333;
    }
    #question {
      font-weight: bold;
      margin-bottom: 20px;
    }
    #choices {
      margin-bottom: 20px;
    }
    .choice {
      display: inline-block;
      margin: 10px;
      padding: 12px;
      border-radius: 8px;
      background-color: #ffffff;
      cursor: pointer;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .choice:hover {
      background-color: #f5f5f5;
    }
    #result {
      font-weight: bold;
      margin-bottom: 20px;
    }
    #score {
      font-weight: bold;
    }
  </style>
  <script>
    var questions = [];
    var currentQuestion = null;
    var score = 0;

    function loadQuestions() {
      // Load the questions from the CSV file (data.csv)
      // Replace 'data.csv' with the actual path to your CSV file
      fetch('data.csv')
        .then(response => response.text())
        .then(text => {
          // Parse the CSV data
          var rows = text.split('\n');
          for (var i = 1; i < rows.length; i++) {
            var columns = rows[i].split(',');
            if (columns.length === 5) {
              var choices = [columns[1], columns[2], columns[3]];
              shuffleArray(choices);
              var question = {
                question: columns[0],
                choices: choices,
                answer: columns[1]
              };
              questions.push(question);
            }
          }
          showQuestion();
        })
        .catch(error => {
          console.error('Error loading questions:', error);
        });
    }

    function showQuestion() {
      // Clear previous question and result
      document.getElementById('question').textContent = '';
      document.getElementById('choices').innerHTML = '';
      document.getElementById('result').textContent = '';

      // Randomly select a question
      var index = Math.floor(Math.random() * questions.length);
      currentQuestion = questions[index];

      // Display the question
      document.getElementById('question').textContent = currentQuestion.question;

      // Display the choices
      var choices = currentQuestion.choices;
      for (var i = 0; i < choices.length; i++) {
        var choice = document.createElement('div');
        choice.className = 'choice';
        choice.textContent = choices[i];
        choice.addEventListener('click', checkAnswer);
        document.getElementById('choices').appendChild(choice);
      }
    }

    function checkAnswer(event) {
      var selectedChoice = event.target.textContent;

      // Check if the selected choice is correct
      if (selectedChoice === currentQuestion.answer) {
        score++;
        document.getElementById('result').textContent = 'Correct!';
      } else {
        document.getElementById('result').textContent = 'Incorrect!';
      }

      // Update the score
      document.getElementById('score').textContent = 'Score: ' + score;

      // Show the correct answer
      var answer = document.createElement('div');
      answer.textContent = 'Correct Answer: ' + currentQuestion.answer;
      document.getElementById('choices').appendChild(answer);

      // Load the next question
      showQuestion();
    }

    // Shuffle array in place using Fisher-Yates algorithm
    function shuffleArray(array) {
      for (var i = array.length - 1; i > 0; i--) {
        var j = Math.floor(Math.random() * (i + 1));
        var temp = array[i];
        array[i] = array[j];
        array[j] = temp;
      }
    }

    // Start the game
    window.addEventListener('DOMContentLoaded', function() {
      loadQuestions();
    });
  </script>
</head>
<body>
  <h1>Trivia Game</h1>
  <div id="question"></div>
  <div id="choices"></div>
  <div id="result"></div>
  <div id="score">Score: 0</div>
</body>
</html>
